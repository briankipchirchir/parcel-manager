/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ue=["require","exports","vs/base/common/path","vs/base/common/platform","vs/base/common/strings","vs/base/common/extpath","vs/base/common/charCode","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/lazy","vs/base/common/arrays","vs/base/common/map","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],he=function(oe){for(var e=[],M=0,k=oe.length;M<k;M++)e[M]=ue[oe[M]];return e};define(ue[11],he([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ce=void 0,e.$ce=Symbol("MicrotaskDelay")}),define(ue[5],he([0,1,6,2,3,4,17]),function(oe,e,M,k,O,g,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$sg=b,e.$tg=Q,e.$ug=L,e.$vg=W,e.$wg=X,e.$xg=n,e.$yg=c,e.$zg=d,e.$Ag=S,e.$Bg=f,e.$Cg=A,e.$Dg=J,e.$Eg=P,e.$Fg=F,e.$Gg=D,e.$Hg=H,e.$Ig=K;function b(s){return s===M.CharCode.Slash||s===M.CharCode.Backslash}function Q(s){return s.replace(/[\\/]/g,k.$gc.sep)}function L(s){return s.indexOf("/")===-1&&(s=Q(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function W(s,$=k.$gc.sep){if(!s)return"";const j=s.length,q=s.charCodeAt(0);if(b(q)){if(b(s.charCodeAt(1))&&!b(s.charCodeAt(2))){let U=3;const p=U;for(;U<j&&!b(s.charCodeAt(U));U++);if(p!==U&&!b(s.charCodeAt(U+1))){for(U+=1;U<j;U++)if(b(s.charCodeAt(U)))return s.slice(0,U+1).replace(/[\\/]/g,$)}}return $}else if(S(q)&&s.charCodeAt(1)===M.CharCode.Colon)return b(s.charCodeAt(2))?s.slice(0,2)+$:s.slice(0,2);let V=s.indexOf("://");if(V!==-1){for(V+=3;V<j;V++)if(b(s.charCodeAt(V)))return s.slice(0,V+1)}return""}function X(s){if(!O.$i||!s||s.length<5)return!1;let $=s.charCodeAt(0);if($!==M.CharCode.Backslash||($=s.charCodeAt(1),$!==M.CharCode.Backslash))return!1;let j=2;const q=j;for(;j<s.length&&($=s.charCodeAt(j),$!==M.CharCode.Backslash);j++);return!(q===j||($=s.charCodeAt(j+1),isNaN($)||$===M.CharCode.Backslash))}const G=/[\\/:\*\?"<>\|]/g,ee=/[/]/g,l=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function n(s,$=O.$i){const j=$?G:ee;return!(!s||s.length===0||/^\s+$/.test(s)||(j.lastIndex=0,j.test(s))||$&&l.test(s)||s==="."||s===".."||$&&s[s.length-1]==="."||$&&s.length!==s.trim().length||s.length>255)}function c(s,$,j){const q=s===$;return!j||q?q:!s||!$?!1:(0,g.$Bf)(s,$)}function d(s,$,j,q=k.sep){if(s===$)return!0;if(!s||!$||$.length>s.length)return!1;if(j){if(!(0,g.$Cf)(s,$))return!1;if($.length===s.length)return!0;let U=$.length;return $.charAt($.length-1)===q&&U--,s.charAt(U)===q}return $.charAt($.length-1)!==q&&($+=q),s.indexOf($)===0}function S(s){return s>=M.CharCode.A&&s<=M.CharCode.Z||s>=M.CharCode.a&&s<=M.CharCode.z}function f(s,$){return O.$i&&s.endsWith(":")&&(s+=k.sep),(0,k.$ic)(s)||(s=(0,k.$jc)($,s)),s=(0,k.$hc)(s),A(s)}function A(s){return O.$i?(s=(0,g.$jf)(s,k.sep),s.endsWith(":")&&(s+=k.sep)):(s=(0,g.$jf)(s,k.sep),s||(s=k.sep)),s}function J(s){const $=(0,k.$hc)(s);return O.$i?s.length>3?!1:P($)&&(s.length===2||$.charCodeAt(2)===M.CharCode.Backslash):$===k.$gc.sep}function P(s,$=O.$i){return $?S(s.charCodeAt(0))&&s.charCodeAt(1)===M.CharCode.Colon:!1}function F(s,$=O.$i){return P(s,$)?s[0]:void 0}function D(s,$,j){return $.length>s.length?-1:s===$?0:(j&&(s=s.toLowerCase(),$=$.toLowerCase()),s.indexOf($))}function H(s){const $=s.split(":");let j,q,V;for(const U of $){const p=Number(U);(0,I.$eg)(p)?q===void 0?q=p:V===void 0&&(V=p):j=j?[j,U].join(":"):U}if(!j)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:j,line:q!==void 0?q:void 0,column:V!==void 0?V:q!==void 0?1:void 0}}const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Y="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function K(s,$,j=8){let q="";for(let U=0;U<j;U++){let p;U===0&&O.$i&&!$&&(j===3||j===4)?p=Y:p=x,q+=p.charAt(Math.floor(Math.random()*p.length))}let V;return $?V=`${$}-${q}`:V=q,s?(0,k.$jc)(s,V):V}}),define(ue[12],he([0,1,13,3,4,7,2]),function(oe,e,M,k,O,g,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$Ug=e.$Tg=e.$Sg=e.$Rg=e.$Qg=e.$Pg=e.$Ng=e.$Mg=e.$Lg=e.Schemas=void 0,e.$Jg=Q,e.$Kg=L,e.$Og=X;var b;(function(l){l.inMemory="inmemory",l.vscode="vscode",l.internal="private",l.walkThrough="walkThrough",l.walkThroughSnippet="walkThroughSnippet",l.http="http",l.https="https",l.file="file",l.mailto="mailto",l.untitled="untitled",l.data="data",l.command="command",l.vscodeRemote="vscode-remote",l.vscodeRemoteResource="vscode-remote-resource",l.vscodeManagedRemoteResource="vscode-managed-remote-resource",l.vscodeUserData="vscode-userdata",l.vscodeCustomEditor="vscode-custom-editor",l.vscodeNotebookCell="vscode-notebook-cell",l.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",l.vscodeNotebookCellOutput="vscode-notebook-cell-output",l.vscodeInteractiveInput="vscode-interactive-input",l.vscodeSettings="vscode-settings",l.vscodeWorkspaceTrust="vscode-workspace-trust",l.vscodeTerminal="vscode-terminal",l.vscodeChatCodeBlock="vscode-chat-code-block",l.vscodeCopilotBackingChatCodeBlock="vscode-copilot-chat-code-block",l.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",l.vscodeChatSesssion="vscode-chat-editor",l.webviewPanel="webview-panel",l.vscodeWebview="vscode-webview",l.extension="extension",l.vscodeFileResource="vscode-file",l.tmp="tmp",l.vsls="vsls",l.vscodeSourceControl="vscode-scm",l.commentsInput="comment",l.codeSetting="code-setting"})(b||(e.Schemas=b={}));function Q(l,n){return g.URI.isUri(l)?(0,O.$Bf)(l.scheme,n):(0,O.$Cf)(l,n+":")}function L(l,...n){return n.some(c=>Q(l,c))}e.$Lg="vscode-tkn",e.$Mg="tkn";class W{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(n){this.d=n}setDelegate(n){this.e=n}setServerRootPath(n,c){this.f=X(n,c)}getServerRootPath(){return this.f}get g(){return I.$gc.join(this.f,b.vscodeRemoteResource)}set(n,c,d){this.a[n]=c,this.b[n]=d}setConnectionToken(n,c){this.c[n]=c}getPreferredWebSchema(){return this.d}rewrite(n){if(this.e)try{return this.e(n)}catch(J){return M.$1(J),n}const c=n.authority;let d=this.a[c];d&&d.indexOf(":")!==-1&&d.indexOf("[")===-1&&(d=`[${d}]`);const S=this.b[c],f=this.c[c];let A=`path=${encodeURIComponent(n.path)}`;return typeof f=="string"&&(A+=`&${e.$Mg}=${encodeURIComponent(f)}`),g.URI.from({scheme:k.$o?this.d:b.vscodeRemoteResource,authority:`${d}:${S}`,path:this.g,query:A})}}e.$Ng=new W;function X(l,n){return I.$gc.join(n??"/",`${l.quality??"oss"}-${l.commit??"dev"}`)}e.$Pg="vs/../../extensions",e.$Qg="vs/../../node_modules",e.$Rg="vs/../../node_modules.asar",e.$Sg="vs/../../node_modules.asar.unpacked",e.$Tg="vscode-app";class G{static{this.a=e.$Tg}asBrowserUri(n){const c=this.b(n,oe);return this.uriToBrowserUri(c)}uriToBrowserUri(n){return n.scheme===b.vscodeRemote?e.$Ng.rewrite(n):n.scheme===b.file&&(k.$m||k.$q===`${b.vscodeFileResource}://${G.a}`)?n.with({scheme:b.vscodeFileResource,authority:n.authority||G.a,query:null,fragment:null}):n}asFileUri(n){const c=this.b(n,oe);return this.uriToFileUri(c)}uriToFileUri(n){return n.scheme===b.vscodeFileResource?n.with({scheme:b.file,authority:n.authority!==G.a?n.authority:null,query:null,fragment:null}):n}b(n,c){return g.URI.isUri(n)?n:g.URI.parse(c.toUrl(n))}}e.$Ug=new G;var ee;(function(l){const n=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);l.CoopAndCoep=Object.freeze(n.get("3"));const c="vscode-coi";function d(f){let A;typeof f=="string"?A=new URL(f).searchParams:f instanceof URL?A=f.searchParams:g.URI.isUri(f)&&(A=new URL(f.toString(!0)).searchParams);const J=A?.get(c);if(J)return n.get(J)}l.getHeadersFromQuery=d;function S(f,A,J){if(!globalThis.crossOriginIsolated)return;const P=A&&J?"3":J?"2":"1";f instanceof URLSearchParams?f.set(c,P):f[c]=P}l.addSearchParam=S})(ee||(e.COI=ee={}))}),define(ue[8],he([0,1,6,5,12,2,3,4,7]),function(oe,e,M,k,O,g,I,b,Q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataUri=e.$jh=e.$ih=e.$hh=e.$gh=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=e.$8g=e.$7g=e.$6g=e.$5g=e.$4g=e.$3g=void 0,e.$2g=L,e.$kh=X,e.$lh=ee;function L(l){return(0,Q.$wc)(l,!0)}class W{constructor(n){this.a=n}compare(n,c,d=!1){return n===c?0:(0,b.$uf)(this.getComparisonKey(n,d),this.getComparisonKey(c,d))}isEqual(n,c,d=!1){return n===c?!0:!n||!c?!1:this.getComparisonKey(n,d)===this.getComparisonKey(c,d)}getComparisonKey(n,c=!1){return n.with({path:this.a(n)?n.path.toLowerCase():void 0,fragment:c?null:void 0}).toString()}ignorePathCasing(n){return this.a(n)}isEqualOrParent(n,c,d=!1){if(n.scheme===c.scheme){if(n.scheme===O.Schemas.file)return k.$zg(L(n),L(c),this.a(n))&&n.query===c.query&&(d||n.fragment===c.fragment);if((0,e.$gh)(n.authority,c.authority))return k.$zg(n.path,c.path,this.a(n),"/")&&n.query===c.query&&(d||n.fragment===c.fragment)}return!1}joinPath(n,...c){return Q.URI.joinPath(n,...c)}basenameOrAuthority(n){return(0,e.$$g)(n)||n.authority}basename(n){return g.$gc.basename(n.path)}extname(n){return g.$gc.extname(n.path)}dirname(n){if(n.path.length===0)return n;let c;return n.scheme===O.Schemas.file?c=Q.URI.file(g.$mc(L(n))).path:(c=g.$gc.dirname(n.path),n.authority&&c.length&&c.charCodeAt(0)!==M.CharCode.Slash&&(console.error(`dirname("${n.toString})) resulted in a relative path`),c="/")),n.with({path:c})}normalizePath(n){if(!n.path.length)return n;let c;return n.scheme===O.Schemas.file?c=Q.URI.file(g.$hc(L(n))).path:c=g.$gc.normalize(n.path),n.with({path:c})}relativePath(n,c){if(n.scheme!==c.scheme||!(0,e.$gh)(n.authority,c.authority))return;if(n.scheme===O.Schemas.file){const f=g.$lc(L(n),L(c));return I.$i?k.$tg(f):f}let d=n.path||"/";const S=c.path||"/";if(this.a(n)){let f=0;for(const A=Math.min(d.length,S.length);f<A&&!(d.charCodeAt(f)!==S.charCodeAt(f)&&d.charAt(f).toLowerCase()!==S.charAt(f).toLowerCase());f++);d=S.substr(0,f)+d.substr(f)}return g.$gc.relative(d,S)}resolvePath(n,c){if(n.scheme===O.Schemas.file){const d=Q.URI.file(g.$kc(L(n),c));return n.with({authority:d.authority,path:d.path})}return c=k.$ug(c),n.with({path:g.$gc.resolve(n.path,c)})}isAbsolutePath(n){return!!n.path&&n.path[0]==="/"}isEqualAuthority(n,c){return n===c||n!==void 0&&c!==void 0&&(0,b.$Bf)(n,c)}hasTrailingPathSeparator(n,c=g.sep){if(n.scheme===O.Schemas.file){const d=L(n);return d.length>k.$vg(d).length&&d[d.length-1]===c}else{const d=n.path;return d.length>1&&d.charCodeAt(d.length-1)===M.CharCode.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(n.fsPath)}}removeTrailingPathSeparator(n,c=g.sep){return(0,e.$hh)(n,c)?n.with({path:n.path.substr(0,n.path.length-1)}):n}addTrailingPathSeparator(n,c=g.sep){let d=!1;if(n.scheme===O.Schemas.file){const S=L(n);d=S!==void 0&&S.length===k.$vg(S).length&&S[S.length-1]===c}else{c="/";const S=n.path;d=S.length===1&&S.charCodeAt(S.length-1)===M.CharCode.Slash}return!d&&!(0,e.$hh)(n,c)?n.with({path:n.path+"/"}):n}}e.$3g=W,e.$4g=new W(()=>!1),e.$5g=new W(l=>l.scheme===O.Schemas.file?!I.$k:!0),e.$6g=new W(l=>!0),e.$7g=e.$4g.isEqual.bind(e.$4g),e.$8g=e.$4g.isEqualOrParent.bind(e.$4g),e.$9g=e.$4g.getComparisonKey.bind(e.$4g),e.$0g=e.$4g.basenameOrAuthority.bind(e.$4g),e.$$g=e.$4g.basename.bind(e.$4g),e.$_g=e.$4g.extname.bind(e.$4g),e.$ah=e.$4g.dirname.bind(e.$4g),e.$bh=e.$4g.joinPath.bind(e.$4g),e.$ch=e.$4g.normalizePath.bind(e.$4g),e.$dh=e.$4g.relativePath.bind(e.$4g),e.$eh=e.$4g.resolvePath.bind(e.$4g),e.$fh=e.$4g.isAbsolutePath.bind(e.$4g),e.$gh=e.$4g.isEqualAuthority.bind(e.$4g),e.$hh=e.$4g.hasTrailingPathSeparator.bind(e.$4g),e.$ih=e.$4g.removeTrailingPathSeparator.bind(e.$4g),e.$jh=e.$4g.addTrailingPathSeparator.bind(e.$4g);function X(l,n){const c=[];for(let d=0;d<l.length;d++){const S=n(l[d]);l.some((f,A)=>A===d?!1:(0,e.$8g)(S,n(f)))||c.push(l[d])}return c}var G;(function(l){l.META_DATA_LABEL="label",l.META_DATA_DESCRIPTION="description",l.META_DATA_SIZE="size",l.META_DATA_MIME="mime";function n(c){const d=new Map;c.path.substring(c.path.indexOf(";")+1,c.path.lastIndexOf(";")).split(";").forEach(A=>{const[J,P]=A.split(":");J&&P&&d.set(J,P)});const f=c.path.substring(0,c.path.indexOf(";"));return f&&d.set(l.META_DATA_MIME,f),d}l.parseMetaData=n})(G||(e.DataUri=G={}));function ee(l,n,c){if(n){let d=l.path;return d&&d[0]!==g.$gc.sep&&(d=g.$gc.sep+d),l.with({scheme:c,authority:n,path:d})}return l.with({scheme:c})}}),define(ue[9],he([0,1,14,13,18,19,8,3,11,20]),function(oe,e,M,k,O,g,I,b,Q,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$4h=e.$2h=e.$1h=e.$Zh=e.$Yh=e.Promises=e.$Xh=e.$Wh=e.$Vh=e.$Th=e.$Sh=e.$Rh=e.$Qh=e.$Ph=e.$Oh=e.$Nh=e.$Mh=e.$Lh=e.$Kh=e.$Jh=e.$Ih=e.$Hh=e.$Gh=e.$Ah=e.$zh=e.$yh=e.$xh=e.$wh=e.$vh=e.$uh=void 0,e.$mh=W,e.$nh=X,e.$oh=G,e.$ph=ee,e.$qh=l,e.$rh=n,e.$sh=c,e.$th=d,e.$Bh=Y,e.$Ch=K,e.$Dh=s,e.$Eh=$,e.$Fh=j,e.$Uh=m,e.$3h=ie;function W(o){return!!o&&typeof o.then=="function"}function X(o){const t=new M.$se,i=o(t.token),r=new Promise((a,R)=>{const te=t.token.onCancellationRequested(()=>{te.dispose(),R(new k.$5)});Promise.resolve(i).then(re=>{te.dispose(),t.dispose(),a(re)},re=>{te.dispose(),t.dispose(),R(re)})});return new class{cancel(){t.cancel(),t.dispose()}then(a,R){return r.then(a,R)}catch(a){return this.then(void 0,a)}finally(a){return r.finally(a)}}}function G(o,t,i){return new Promise((r,a)=>{const R=t.onCancellationRequested(()=>{R.dispose(),r(i)});o.then(r,a).finally(()=>R.dispose())})}function ee(o,t){return new Promise((i,r)=>{const a=t.onCancellationRequested(()=>{a.dispose(),r(new k.$5)});o.then(i,r).finally(()=>a.dispose())})}async function l(o){let t=-1;const i=o.map((r,a)=>r.then(R=>(t=a,R)));try{return await Promise.race(i)}finally{o.forEach((r,a)=>{a!==t&&r.cancel()})}}function n(o,t,i){let r;const a=setTimeout(()=>{r?.(void 0),i?.()},t);return Promise.race([o.finally(()=>clearTimeout(a)),new Promise(R=>r=R)])}function c(o){return new Promise((t,i)=>{const r=o();W(r)?r.then(t,i):t(r)})}function d(){let o,t;return{promise:new Promise((r,a)=>{o=r,t=a}),resolve:o,reject:t}}class S{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=t,!this.b){const i=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(i,i).then(r)})}return new Promise((i,r)=>{this.b.then(i,r)})}return this.a=t(),new Promise((i,r)=>{this.a.then(a=>{this.a=null,i(a)},a=>{this.a=null,r(a)})})}dispose(){this.f=!0}}e.$uh=S;class f{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$vh=f;class A{constructor(){this.a=new Map}queue(t,i){const a=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===a&&this.a.delete(t)});return this.a.set(t,a),a}}e.$wh=A;const J=(o,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},o);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},P=o=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,o())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class F{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((a,R)=>{this.d=a,this.f=R}).then(()=>{if(this.b=null,this.d=null,this.g){const a=this.g;return this.g=null,a()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=i===Q.$ce?P(r):J(i,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new k.$5),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$xh=F;class D{constructor(t){this.a=new F(t),this.b=new S}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$yh=D;class H{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$zh=H;class x extends H{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$Ah=x;function Y(o,t){return t?new Promise((i,r)=>{const a=setTimeout(()=>{R.dispose(),i()},o),R=t.onCancellationRequested(()=>{clearTimeout(a),R.dispose(),r(new k.$5)})}):X(i=>Y(o,i))}function K(o,t=0,i){const r=setTimeout(()=>{o(),i&&a.dispose()},t),a=(0,g.$Sc)(()=>{clearTimeout(r),i?.deleteAndLeak(a)});return i?.add(a),a}function s(o){const t=[];let i=0;const r=o.length;function a(){return i<r?o[i++]():null}function R(te){te!=null&&t.push(te);const re=a();return re?re.then(R):Promise.resolve(t)}return Promise.resolve(null).then(R)}function $(o,t=r=>!!r,i=null){let r=0;const a=o.length,R=()=>{if(r>=a)return Promise.resolve(i);const te=o[r++];return Promise.resolve(te()).then(de=>t(de)?Promise.resolve(de):R())};return R()}function j(o,t=r=>!!r,i=null){if(o.length===0)return Promise.resolve(i);let r=o.length;const a=()=>{r=-1;for(const R of o)R.cancel?.()};return new Promise((R,te)=>{for(const re of o)re.then(de=>{--r>=0&&t(de)?(a(),R(de)):r===0&&R(i)}).catch(de=>{--r>=0&&(a(),te(de))})})}class q{constructor(t){this.a=0,this.b=!1,this.f=t,this.g=[],this.d=0,this.h=new O.$he}whenIdle(){return this.size>0?O.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(t){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((i,r)=>{this.g.push({factory:t,c:i,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const t=this.g.shift();this.d++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}}e.$Gh=q;class V extends q{constructor(){super(1)}}e.$Hh=V;class U{constructor(){this.a=new u,this.b=0}queue(t){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,t())):this.a.run(this.b++,t())}}e.$Ih=U;class p{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const t=new T;return this.b.add(t),t.p}g(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueSize(t,i=I.$4g){const r=i.getComparisonKey(t);return this.a.get(r)?.size??0}queueFor(t,i,r=I.$4g){const a=r.getComparisonKey(t);let R=this.a.get(a);if(!R){R=new V;const te=this.f++,re=O.Event.once(R.onDrained)(()=>{R?.dispose(),this.a.delete(a),this.h(),this.d?.deleteAndDispose(te),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new g.$4c),this.d.set(te,re),this.a.set(a,R)}return R.queue(i)}h(){this.g()&&this.j()}j(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$Jh=p;class se{constructor(t,i){this.b=!1,this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel(),this.b=!0}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){if(this.b)throw new k.$cb("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){if(this.b)throw new k.$cb("Calling 'setIfNotSet' on a disposed TimeoutTimer");this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.$Kh=se;class fe{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(t,i,r=globalThis){if(this.f)throw new k.$cb("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const a=r.setInterval(()=>{t()},i);this.d=(0,g.$Sc)(()=>{r.clearInterval(a),this.d=void 0})}dispose(){this.cancel(),this.f=!0}}e.$Lh=fe;class N{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$Mh=N;class ne{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$Nh=ne;class _ extends N{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$Oh=_;class le extends g.$Uc{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new g.$Vc),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new N(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$Ph=le,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$Rh=(o,t)=>{(0,b.$B)(()=>{if(i)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:e.$Rh=(o,t,i)=>{const r=o.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let a=!1;return{dispose(){a||(a=!0,o.cancelIdleCallback(r))}}},e.$Qh=o=>(0,e.$Rh)(globalThis,o)}();class ae{constructor(t,i){this.g=!1,this.d=()=>{try{this.j=i()}catch(r){this.l=r}finally{this.g=!0}},this.f=(0,e.$Rh)(t,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$Sh=ae;class h extends ae{constructor(t){super(globalThis,t)}}e.$Th=h;async function m(o,t,i){let r;for(let a=0;a<i;a++)try{return await o()}catch(R){r=R,await Y(t)}throw r}class u{isRunning(t){return typeof t=="number"?this.a?.taskId===t:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(t,i,r){return this.a={taskId:t,cancel:()=>r?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}queue(t){if(this.b)this.b.run=t;else{const{promise:i,resolve:r,reject:a}=d();this.b={run:t,promise:i,promiseResolve:r,promiseReject:a}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$Vh=u;class y{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$Wh=y;var v;(function(o){o[o.Resolved=0]="Resolved",o[o.Rejected=1]="Rejected"})(v||(v={}));class T{get isRejected(){return this.d?.outcome===v.Rejected}get isResolved(){return this.d?.outcome===v.Resolved}get isSettled(){return!!this.d}get value(){return this.d?.outcome===v.Resolved?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.d={outcome:v.Resolved,value:t},i()})}error(t){return new Promise(i=>{this.b(t),this.d={outcome:v.Rejected,value:t},i()})}cancel(){return this.error(new k.$5)}}e.$Xh=T;var z;(function(o){async function t(r){let a;const R=await Promise.all(r.map(te=>te.then(re=>re,re=>{a||(a=re)})));if(typeof a<"u")throw a;return R}o.settled=t;function i(r){return new Promise(async(a,R)=>{try{await r(a,R)}catch(te){R(te)}})}o.withAsyncBody=i})(z||(e.Promises=z={}));class w{get value(){return this.a}get error(){return this.b}get isResolved(){return this.d}constructor(t){this.a=void 0,this.b=void 0,this.d=!1,this.promise=t.then(i=>(this.a=i,this.d=!0,i),i=>{throw this.b=i,this.d=!0,i})}requireValue(){if(!this.d)throw new k.$cb("Promise is not resolved yet");if(this.b)throw this.b;return this.a}}e.$Yh=w;class E{constructor(t){this.b=t,this.a=new L.$V(()=>new w(this.b()))}requireValue(){return this.a.value.requireValue()}getPromise(){return this.a.value.promise}get currentValue(){return this.a.rawValue?.value}}e.$Zh=E;var B;(function(o){o[o.Initial=0]="Initial",o[o.DoneOK=1]="DoneOK",o[o.DoneError=2]="DoneError"})(B||(B={}));class C{static fromArray(t){return new C(i=>{i.emitMany(t)})}static fromPromise(t){return new C(async i=>{i.emitMany(await t)})}static fromPromises(t){return new C(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new C(async i=>{await Promise.all(t.map(async r=>{for await(const a of r)i.emitOne(a)}))})}static{this.EMPTY=C.fromArray([])}constructor(t,i){this.a=B.Initial,this.b=[],this.d=null,this.f=i,this.g=new O.$he,queueMicrotask(async()=>{const r={emitOne:a=>this.h(a),emitMany:a=>this.j(a),reject:a=>this.l(a)};try{await Promise.resolve(t(r)),this.k()}catch(a){this.l(a)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===B.DoneError)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===B.DoneOK)return{done:!0,value:void 0};await O.Event.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new C(async r=>{for await(const a of t)r.emitOne(i(a))})}map(t){return C.map(this,t)}static filter(t,i){return new C(async r=>{for await(const a of t)i(a)&&r.emitOne(a)})}filter(t){return C.filter(this,t)}static coalesce(t){return C.filter(t,i=>!!i)}coalesce(){return C.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return C.toPromise(this)}h(t){this.a===B.Initial&&(this.b.push(t),this.g.fire())}j(t){this.a===B.Initial&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===B.Initial&&(this.a=B.DoneOK,this.g.fire())}l(t){this.a===B.Initial&&(this.a=B.DoneError,this.d=t,this.g.fire())}}e.$1h=C;class Z extends C{constructor(t,i){super(i),this.m=t}cancel(){this.m.cancel()}}e.$2h=Z;function ie(o){const t=new M.$se,i=o(t.token);return new Z(t,async r=>{const a=t.token.onCancellationRequested(()=>{a.dispose(),t.dispose(),r.reject(new k.$5)});try{for await(const R of i){if(t.token.isCancellationRequested)return;r.emitOne(R)}a.dispose(),t.dispose()}catch(R){a.dispose(),t.dispose(),r.reject(R)}})}class ce{constructor(t){this.a=new T,this.b=new C(a=>{if(i){a.reject(i);return}return r&&a.emitMany(r),this.d=R=>a.reject(R),this.f=R=>a.emitOne(R),this.a.p},t);let i,r;this.f=a=>{r||(r=[]),r.push(a)},this.d=a=>{i||(i=a)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(t){this.d(t),this.a.complete()}emitOne(t){this.f(t)}}e.$4h=ce}),define(ue[10],he([0,1,21,9,6,5,22,2,3,4]),function(oe,e,M,k,O,g,I,b,Q,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$rk=e.$qk=void 0,e.$pk=W,e.$sk=n,e.$tk=U,e.$uk=p,e.$vk=se,e.$wk=fe,e.$xk=N,e.$yk=ae;function W(){return Object.create(null)}e.$qk="**",e.$rk="/";const X="[/\\\\]",G="[^/\\\\]",ee=/\//g;function l(h,m){switch(h){case 0:return"";case 1:return`${G}*?`;default:return`(?:${X}|${G}+${X}${m?`|${X}${G}+`:""})*?`}}function n(h,m){if(!h)return[];const u=[];let y=!1,v=!1,T="";for(const z of h){switch(z){case m:if(!y&&!v){u.push(T),T="";continue}break;case"{":y=!0;break;case"}":y=!1;break;case"[":v=!0;break;case"]":v=!1;break}T+=z}return T&&u.push(T),u}function c(h){if(!h)return"";let m="";const u=n(h,e.$rk);if(u.every(y=>y===e.$qk))m=".*";else{let y=!1;u.forEach((v,T)=>{if(v===e.$qk){if(y)return;m+=l(2,T===u.length-1)}else{let z=!1,w="",E=!1,B="";for(const C of v){if(C!=="}"&&z){w+=C;continue}if(E&&(C!=="]"||!B)){let Z;C==="-"?Z=C:(C==="^"||C==="!")&&!B?Z="^":C===e.$rk?Z="":Z=(0,L.$df)(C),B+=Z;continue}switch(C){case"{":z=!0;continue;case"[":E=!0;continue;case"}":{const ie=`(?:${n(w,",").map(ce=>c(ce)).join("|")})`;m+=ie,z=!1,w="";break}case"]":{m+="["+B+"]",E=!1,B="";break}case"?":m+=G;continue;case"*":m+=l(1);continue;default:m+=(0,L.$df)(C)}}T<u.length-1&&(u[T+1]!==e.$qk||T+2<u.length)&&(m+=X)}y=v===e.$qk})}return m}const d=/^\*\*\/\*\.[\w\.-]+$/,S=/^\*\*\/([\w\.-]+)\/?$/,f=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,A=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,J=/^\*\*((\/[\w\.-]+)+)\/?$/,P=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,F=new I.$Dc(1e4),D=function(){return!1},H=function(){return null};function x(h,m){if(!h)return H;let u;typeof h!="string"?u=h.pattern:u=h,u=u.trim();const y=`${u}_${!!m.trimForExclusions}`;let v=F.get(y);if(v)return Y(v,h);let T;return d.test(u)?v=s(u.substr(4),u):(T=S.exec(K(u,m)))?v=$(T[1],u):(m.trimForExclusions?A:f).test(u)?v=j(u,m):(T=J.exec(K(u,m)))?v=q(T[1].substr(1),u,!0):(T=P.exec(K(u,m)))?v=q(T[1],u,!1):v=V(u),F.set(y,v),Y(v,h)}function Y(h,m){if(typeof m=="string")return h;const u=function(y,v){return(0,g.$zg)(y,m.base,!Q.$k)?h((0,L.$if)(y.substr(m.base.length),b.sep),v):null};return u.allBasenames=h.allBasenames,u.allPaths=h.allPaths,u.basenames=h.basenames,u.patterns=h.patterns,u}function K(h,m){return m.trimForExclusions&&h.endsWith("/**")?h.substr(0,h.length-2):h}function s(h,m){return function(u,y){return typeof u=="string"&&u.endsWith(h)?m:null}}function $(h,m){const u=`/${h}`,y=`\\${h}`,v=function(z,w){return typeof z!="string"?null:w?w===h?m:null:z===h||z.endsWith(u)||z.endsWith(y)?m:null},T=[h];return v.basenames=T,v.patterns=[m],v.allBasenames=T,v}function j(h,m){const u=le(h.slice(1,-1).split(",").map(w=>x(w,m)).filter(w=>w!==H),h),y=u.length;if(!y)return H;if(y===1)return u[0];const v=function(w,E){for(let B=0,C=u.length;B<C;B++)if(u[B](w,E))return h;return null},T=u.find(w=>!!w.allBasenames);T&&(v.allBasenames=T.allBasenames);const z=u.reduce((w,E)=>E.allPaths?w.concat(E.allPaths):w,[]);return z.length&&(v.allPaths=z),v}function q(h,m,u){const y=b.sep===b.$gc.sep,v=y?h:h.replace(ee,b.sep),T=b.sep+v,z=b.$gc.sep+h;let w;return u?w=function(E,B){return typeof E=="string"&&(E===v||E.endsWith(T)||!y&&(E===h||E.endsWith(z)))?m:null}:w=function(E,B){return typeof E=="string"&&(E===v||!y&&E===h)?m:null},w.allPaths=[(u?"*/":"./")+h],w}function V(h){try{const m=new RegExp(`^${c(h)}$`);return function(u){return m.lastIndex=0,typeof u=="string"&&m.test(u)?h:null}}catch{return H}}function U(h,m,u){return!h||typeof m!="string"?!1:p(h)(m,void 0,u)}function p(h,m={}){if(!h)return D;if(typeof h=="string"||se(h)){const u=x(h,m);if(u===H)return D;const y=function(v,T){return!!u(v,T)};return u.allBasenames&&(y.allBasenames=u.allBasenames),u.allPaths&&(y.allPaths=u.allPaths),y}return ne(h,m)}function se(h){const m=h;return m?typeof m.base=="string"&&typeof m.pattern=="string":!1}function fe(h){return h.allBasenames||[]}function N(h){return h.allPaths||[]}function ne(h,m){const u=le(Object.getOwnPropertyNames(h).map(w=>_(w,h[w],m)).filter(w=>w!==H)),y=u.length;if(!y)return H;if(!u.some(w=>!!w.requiresSiblings)){if(y===1)return u[0];const w=function(C,Z){let ie;for(let ce=0,o=u.length;ce<o;ce++){const t=u[ce](C,Z);if(typeof t=="string")return t;(0,k.$mh)(t)&&(ie||(ie=[]),ie.push(t))}return ie?(async()=>{for(const ce of ie){const o=await ce;if(typeof o=="string")return o}return null})():null},E=u.find(C=>!!C.allBasenames);E&&(w.allBasenames=E.allBasenames);const B=u.reduce((C,Z)=>Z.allPaths?C.concat(Z.allPaths):C,[]);return B.length&&(w.allPaths=B),w}const v=function(w,E,B){let C,Z;for(let ie=0,ce=u.length;ie<ce;ie++){const o=u[ie];o.requiresSiblings&&B&&(E||(E=(0,b.$nc)(w)),C||(C=E.substr(0,E.length-(0,b.$oc)(w).length)));const t=o(w,E,C,B);if(typeof t=="string")return t;(0,k.$mh)(t)&&(Z||(Z=[]),Z.push(t))}return Z?(async()=>{for(const ie of Z){const ce=await ie;if(typeof ce=="string")return ce}return null})():null},T=u.find(w=>!!w.allBasenames);T&&(v.allBasenames=T.allBasenames);const z=u.reduce((w,E)=>E.allPaths?w.concat(E.allPaths):w,[]);return z.length&&(v.allPaths=z),v}function _(h,m,u){if(m===!1)return H;const y=x(h,u);if(y===H)return H;if(typeof m=="boolean")return y;if(m){const v=m.when;if(typeof v=="string"){const T=(z,w,E,B)=>{if(!B||!y(z,w))return null;const C=v.replace("$(basename)",()=>E),Z=B(C);return(0,k.$mh)(Z)?Z.then(ie=>ie?h:null):Z?h:null};return T.requiresSiblings=!0,T}}return y}function le(h,m){const u=h.filter(w=>!!w.basenames);if(u.length<2)return h;const y=u.reduce((w,E)=>{const B=E.basenames;return B?w.concat(B):w},[]);let v;if(m){v=[];for(let w=0,E=y.length;w<E;w++)v.push(m)}else v=u.reduce((w,E)=>{const B=E.patterns;return B?w.concat(B):w},[]);const T=function(w,E){if(typeof w!="string")return null;if(!E){let C;for(C=w.length;C>0;C--){const Z=w.charCodeAt(C-1);if(Z===O.CharCode.Slash||Z===O.CharCode.Backslash)break}E=w.substr(C)}const B=y.indexOf(E);return B!==-1?v[B]:null};T.basenames=y,T.patterns=v,T.allBasenames=y;const z=h.filter(w=>!w.basenames);return z.push(T),z}function ae(h,m){return(0,M.$ub)(h,m,(u,y)=>typeof u=="string"&&typeof y=="string"?u===y:typeof u!="string"&&typeof y!="string"?u.base===y.base&&u.pattern===y.pattern:!1)}}),define(ue[15],he([0,1,23]),function(oe,e,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$lsc=void 0;const k=(O,g,I)=>{let b;if(O[0]===255&&O[1]===254)b=new TextDecoder("utf-16le").decode(O);else if(O[0]===254&&O[1]===255)b=new TextDecoder("utf-16be").decode(O);else if(b=new TextDecoder("utf8").decode(O),b.slice(0,1e3).includes("\uFFFD")&&O.includes(0))return[];const Q=[],L=[];let W=null,X=I.remainingResultQuota;for(;X>=0&&(W=g.exec(b));)L.push({matchStartIndex:W.index,matchedText:W[0]}),X--;if(L.length){const G=new Set,ee=new Set,l=[],n=A=>b.slice(l[A].start,l[A].end);let c=0,d=null;const S=/\r?\n/g;for(;d=S.exec(b);)l.push({start:c,end:d.index}),c=d.index+d[0].length;c<b.length&&l.push({start:c,end:b.length});let f=0;for(const{matchStartIndex:A,matchedText:J}of L){if(X<0)break;for(;l[f+1]&&A>l[f].end;)f++;let P=f;for(;l[P+1]&&A+J.length>l[P].end;)P++;if(I.beforeContext)for(let K=Math.max(0,f-I.beforeContext);K<f;K++)G.add(K);let F="",D=0;for(let K=f;K<=P;K++){let s=n(K);I.previewOptions?.charsPerLine&&s.length>I.previewOptions.charsPerLine&&(D=Math.max(A-l[f].start-20,0),s=s.substr(D,I.previewOptions.charsPerLine)),F+=`${s}
`,ee.add(K)}const H=new M.$ct(f,A-l[f].start,P,A+J.length-l[P].start),x=new M.$ct(0,A-l[f].start-D,P-f,A+J.length-l[P].start-(P===f?D:0)),Y={ranges:H,preview:{text:F,matches:x}};if(Q.push(Y),I.afterContext)for(let K=P+1;K<=Math.min(P+I.afterContext,l.length-1);K++)G.add(K)}for(const A of G)ee.has(A)||Q.push({text:n(A),lineNumber:A+1})}return Q};e.$lsc=k}),define(ue[16],he([0,1,10]),function(oe,e,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$irb=void 0;class k{constructor(g,I,b){if(this.b=I,this.c=b,I[I.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");I[I.length-1]!=="/"&&(I+="/"),this.a=this.e(g,this.b,this.c)}updateContents(g){this.a=this.e(g,this.b,this.c)}isPathIncludedInTraversal(g,I){if(g[0]!=="/"||g[g.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+g);return!this.a(g,I)}isArbitraryPathIgnored(g,I){if(g[0]!=="/"||g[g.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+g);const b=g.split("/").filter(W=>W);let Q=!1,L="";for(let W=0;W<b.length;W++){const X=W===b.length-1,G=b[W];if(L=L+"/"+G,!this.isPathIncludedInTraversal(L,X?I:!0)){Q=!0;break}}return Q}d(g,I,b){const Q=g.map(W=>this.f(W,I)),L=Object.create(null);for(const W of Q)L[W]=!0;return M.$uk(L,{trimForExclusions:b})}e(g,I,b){const Q=g.split(`
`).map(f=>f.trim()).filter(f=>f&&f[0]!=="#"),L=Q.filter(f=>!f.endsWith("/")),W=L.filter(f=>!f.includes("!")),X=this.d(W,I,!0),G=L.filter(f=>f.includes("!")).map(f=>f.replace(/!/g,"")),ee=this.d(G,I,!1),l=Q.filter(f=>!f.includes("!")),n=this.d(l,I,!0),c=Q.filter(f=>f.includes("!")).map(f=>f.replace(/!/g,"")),d=this.d(c,I,!1);return(f,A)=>f.startsWith(I)?A&&n(f)&&!d(f)||X(f)&&!ee(f)?!0:b?b.a(f,A):!1:!1}f(g,I){const b=g.indexOf("/");return b===-1||b===g.length-1?g="**/"+g:(b===0?I.slice(-1)==="/"&&(g=g.slice(1)):I.slice(-1)!=="/"&&(g="/"+g),g=I+g),g}}e.$irb=k}),define(ue[24],he([0,1,10,7,2,14,15,16,4,9,8]),function(oe,e,M,k,O,g,I,b,Q,L,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=void 0,e.create=n;const X=!1,G=+new Date,ee={},l=async(P,F)=>{if(!X)return F();const D=Date.now(),H=(ee[P]??0)+1;console.info(P,H,"starting",Math.round((D-G)*10)/1e4),ee[P]=H;const x=await F(),Y=Date.now();return console.info(P,H,"took",Y-D),x};function n(P){return new c(P)}class c{constructor(F){this.d=F,this.cancellationTokens=new Map}cancelQuery(F){this.cancellationTokens.get(F)?.cancel()}g(F){const D=new g.$se;return this.cancellationTokens.set(F,D),D}async listDirectory(F,D,H,x,Y){const K=S(H),s=new W.$3g(()=>x),$=this.g(Y),j=[];let q=!1,V=0;const U=D.maxResults||512,p=D.filePattern?se=>D.filePattern.split("").every(fe=>se.includes(fe)):se=>!0;return await l("listDirectory",()=>this.h(F,f(D),K,s,se=>{if(p(se.name))return V++,U&&V>U&&(q=!0,$.cancel()),j.push(se.path)},$.token)),{results:j,limitHit:q}}async searchDirectory(F,D,H,x,Y){const K=S(H),s=new W.$3g(()=>x);return l("searchInFiles",async()=>{const $=this.g(Y),j=[],q=d(D.contentPattern),V=[];let U=0,p=0;const se=!1,fe=async N=>{if($.token.isCancellationRequested)return;U++;const ne=await N.resolve();if($.token.isCancellationRequested)return;const _=new Uint8Array(ne),le=(0,I.$lsc)(_,q,{afterContext:D.afterContext??0,beforeContext:D.beforeContext??0,previewOptions:D.previewOptions,remainingResultQuota:D.maxResults?D.maxResults-p:1e4});if(le.length){p+=le.length,D.maxResults&&p>D.maxResults&&$.cancel();const ae={resource:k.URI.joinPath(K.folder,N.path),results:le};this.d.sendTextSearchMatch(ae,Y),j.push(ae)}};return await l("walkFolderToResolve",()=>this.h(F,f(D),K,s,async N=>V.push(fe(N)),$.token)),await l("resolveOngoingProcesses",()=>Promise.all(V)),X&&console.log("Searched in",U,"files"),{results:j,limitHit:se}})}async h(F,D,H,x,Y,K){const s=M.$uk(H.excludePattern??{},{trimForExclusions:!0}),$=(N,ne,_)=>(N=N.slice(1),!!(s(N,ne,_)||A(D,N))),j=(N,ne,_)=>(N=N.slice(1),!(s(N,ne,_)||!J(D,N,x))),q=(N,ne)=>({type:"file",name:N.name,path:ne,resolve:()=>N.getFile().then(le=>le.arrayBuffer())}),V=N=>N.kind==="directory",U=N=>N.kind==="file",p=async(N,ne,_)=>{if(!H.disregardIgnoreFiles){const ae=await Promise.all([N.getFileHandle(".gitignore").catch(h=>{}),N.getFileHandle(".ignore").catch(h=>{})]);await Promise.all(ae.map(async h=>{if(!h)return;const m=new TextDecoder("utf8").decode(new Uint8Array(await(await h.getFile()).arrayBuffer()));_=new b.$irb(m,ne,_)}))}const le=L.Promises.withAsyncBody(async ae=>{const h=[],m=[],u=[],y=new Set;for await(const v of N.entries())u.push(v),y.add(v[0]);for(const[v,T]of u){if(K.isCancellationRequested)break;const z=ne+v;if(_&&!_.isPathIncludedInTraversal(z,T.kind==="directory"))continue;const w=E=>y.has(E);V(T)&&!$(z,v,w)?m.push(p(T,z+"/",_)):U(T)&&j(z,v,w)&&h.push(q(T,z))}ae([...await Promise.all(m),...h])});return{type:"dir",name:N.name,entries:le}},se=async(N,ne)=>{K.isCancellationRequested||await Promise.all((await N.entries).sort((_,le)=>-(_.type==="dir"?0:1)+(le.type==="dir"?0:1)).map(async _=>_.type==="dir"?se(_,ne):ne(_)))},fe=await l("process",()=>p(F,"/"));await l("resolve",()=>se(fe,Y))}}e.LocalFileSearchSimpleWorker=c;function d(P){return(0,Q.$mf)(P.pattern,!!P.isRegExp,{wholeWord:P.isWordMatch,global:!0,matchCase:P.isCaseSensitive,multiline:!0,unicode:!0})}function S(P){return{...P,folder:k.URI.revive(P.folder)}}function f(P){return{...P,extraFileResources:P.extraFileResources?.map(F=>k.URI.revive(F)),folderQueries:P.folderQueries.map(F=>S(F))}}function A(P,F){return!!(P.excludePattern&&M.$tk(P.excludePattern,F))}function J(P,F,D){return P.excludePattern&&M.$tk(P.excludePattern,F)?!1:P.includePattern||P.usingSearchPaths?P.includePattern&&M.$tk(P.includePattern,F)?!0:P.usingSearchPaths?!!P.folderQueries&&P.folderQueries.some(H=>{const x=H.folder,Y=k.URI.file(F);if(D.isEqualOrParent(Y,x)){const K=O.$lc(x.path,Y.path);return!H.includePattern||!!M.$tk(H.includePattern,K)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/89de5a8d4d6205e5b11647eb6a74844ca23d2573/core/vs/workbench/services/search/worker/localFileSearch.js.map
